<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="472pt" height="888" viewBox="0 0 471.51 665.8"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 661.8)"><title>%0</title><polygon fill="#fff" stroke="transparent" points="-4 4 -4 -661.8 467.51 -661.8 467.51 4 -4 4"/><g id="clust1" class="cluster"><title>cluster_istioagent</title><polygon fill="none" stroke="orange" points="8 -8 8 -649.8 326 -649.8 326 -8 8 -8"/><text x="167" y="-633.2" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">Istio Agent</text></g><g id="clust2" class="cluster"><title>cluster_istiod</title><polygon fill="none" stroke="#add8e6" points="334 -81 334 -157.8 404 -157.8 404 -81 334 -81"/><text x="369" y="-141.2" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">Istiod</text></g><g id="node1" class="node"><title>grpc</title><polygon fill="none" stroke="#000" points="231 -236.6 191.252 -218.6 231 -200.6 270.748 -218.6 231 -236.6"/><text x="231" y="-214.4" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">grpc</text></g><g id="node2" class="node"><title>ca</title><ellipse cx="369" cy="-107" fill="none" stroke="#000" rx="27" ry="18"/><text x="369" y="-102.8" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">ca</text></g><g id="edge1" class="edge"><title>grpc-&gt;ca</title><path fill="none" stroke="#000" d="M250.6465,-209.2662C271.7076,-198.6676 305.4257,-179.943 330,-157.8 338.3014,-150.3199 346.0955,-140.8836 352.5012,-132.18"/><polygon fill="#000" stroke="#000" points="355.497 -134.006 358.411 -123.82 349.781 -129.965 355.497 -134.006"/><text x="391.755" y="-170" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">Send CSR gRPC Request</text></g><g id="node6" class="node"><title>TokenProvider</title><ellipse cx="249" cy="-34" fill="none" stroke="#000" rx="68.924" ry="18"/><text x="249" y="-29.8" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">TokenProvider</text></g><g id="edge4" class="edge"><title>grpc-&gt;TokenProvider</title><path fill="none" stroke="#a020f0" d="M232.6934,-201.2333C236.1065,-166.2295 243.7813,-87.5205 247.245,-51.9981"/><text x="274.907" y="-102.8" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">Fetch JWT</text></g><g id="node7" class="node"><title>cfiles</title><ellipse cx="89" cy="-34" fill="none" stroke="#000" rx="72.96" ry="18"/><text x="89" y="-29.8" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">Certificate Files</text></g><g id="edge5" class="edge"><title>grpc-&gt;cfiles</title><path fill="none" stroke="#a020f0" d="M218.2589,-206.0505C206.371,-194.0898 188.3997,-175.3519 174.2952,-157.8 145.3569,-121.7887 115.6601,-76.3926 100.0874,-51.8041"/><text x="203.352" y="-102.8" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">Fetch Cert</text></g><g id="node3" class="node"><title>sds</title><ellipse cx="134" cy="-599" fill="none" stroke="#000" rx="27" ry="18"/><text x="134" y="-594.8" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">sds</text></g><g id="node4" class="node"><title>SecretManager</title><ellipse cx="134" cy="-472.2" fill="none" stroke="#000" rx="69.459" ry="18"/><text x="134" y="-468" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">SecretManager</text></g><g id="edge6" class="edge"><title>sds-&gt;SecretManager</title><path fill="none" stroke="#000" d="M134,-580.8327C134,-559.8352 134,-525.0261 134,-500.479"/><polygon fill="#000" stroke="#000" points="137.5 -500.334 134 -490.334 130.5 -500.334 137.5 -500.334"/><text x="188.986" y="-531.4" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">Generate certificate</text></g><g id="node5" class="node"><title>caClient</title><ellipse cx="200" cy="-345.4" fill="none" stroke="#000" rx="43.434" ry="18"/><text x="200" y="-341.2" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">caClient</text></g><g id="edge2" class="edge"><title>SecretManager-&gt;caClient</title><path fill="none" stroke="#000" d="M143.3162,-454.3016C154.4209,-432.9672 173.0878,-397.104 185.9481,-372.3967"/><polygon fill="#000" stroke="#000" points="189.219 -373.694 190.731 -363.207 183.01 -370.462 189.219 -373.694"/><text x="197.815" y="-404.6" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">Sign CSR</text></g><g id="edge7" class="edge"><title>SecretManager-&gt;cfiles</title><path fill="none" stroke="#000" d="M114.4755,-454.7815C103.5074,-443.0336 92,-426.4921 92,-408.8 92,-408.8 92,-408.8 92,-107 92,-92.2872 91.3841,-75.9205 90.7105,-62.419"/><polygon fill="#000" stroke="#000" points="94.198 -62.09 90.168 -52.292 87.208 -62.465 94.198 -62.09"/><text x="141.172" y="-277.8" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">Write certs to file</text></g><g id="edge3" class="edge"><title>caClient-&gt;grpc</title><path fill="none" stroke="#000" d="M204.4415,-327.2327C209.7152,-305.6617 218.5525,-269.5142 224.5724,-244.8911"/><polygon fill="#000" stroke="#000" points="227.986 -245.665 226.961 -235.12 221.186 -244.003 227.986 -245.665"/></g></g></svg>